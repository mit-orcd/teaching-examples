buildspecs:
  file:
    description: "Compile and Run Shell File"
    type: script
    executor: 'engaging.slurm.sched_mit_orcd'
    tags: ["queues", "jobs"]
    sbatch: ["-t 5", "-n 1"]
    shell: csh
    vars:
      job_file: "../../$Python/word_count/Serial/submit_each.sh"
    run: |
      if (! -e $job_file) then
        echo "$job_file file not found"
        exit 1
      else
        echo "$job_file file found"
        set script_dir=`dirname $job_file`
        cd $script_dir
        echo "Running $job_file with bash in directory $script_dir..."
        bash `basename $job_file` > output.log
        if ($status != 0) then
          echo "Failed to run $job_file"
          exit 1
        else
          echo "Output of $job_file"
          cat output.log
          rm output.log
        endif
      endif
